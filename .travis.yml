language: csharp
mono: none

stages:
  - name: test
  # COMMENTED BECAUSE TRAVIS DOES NOT SUPPORT SECRETS FOR WINDOWS YET  
  # - name: deploy
  #   if: tag IS present

#--------- TEST JOBS --------------
jobs:
  include:
    - stage: test
      name: test on osx
      os: osx
      script: dotnet test CommandDotNet.Tests/CommandDotNet.Tests.csproj
      dotnet: 2.1.300
    - name: test on linux
      os: linux
      script: dotnet test CommandDotNet.Tests/CommandDotNet.Tests.csproj
      dotnet: 2.1
    - name: test on windows
      os: windows
      script: dotnet test
#-----------------------------------

# COMMENTED BECAUSE TRAVIS DOES NOT SUPPORT SECRETS FOR WINDOWS YET  
#--------- DEPLOYMENT JOB ----------  
    # - stage: deploy
    #   name: nuget & github release
    #   script: ./deploy.sh
    #   os: linux
    #   dotnet: 2.1
#-----------------------------------

# cache:
#   directories:
#     - $HOME/.nuget/packages  
